<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Social Media Emotion Analysis - Machine Learning</title>

    <!-- Bootstrap Core CSS -->
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename='css/landing-page.css') }}" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="{{ url_for('static', filename='font-awesome/css/font-awesome.min.css') }}" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top topnav" role="navigation">
        <div class="container topnav">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand topnav" href="#home">Home</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#about">About</a>
                    </li>
                    <li>
                        <a href="#dataset">Dataset</a>
                    </li>
                    <li>
                        <a href="#methodology">Methodology</a>
                    </li>
                    <li>
                        <a href="#limitations">Limitations</a>
                    </li>
                    <li>
                        <a href="#nextsteps">Next Steps</a>
                    </li>
                    <li>
                        <a href="#resources">Resources</a>
                    </li>
                    <li>
                        <a href="https://github.com/Allenfp/DataFinal/blob/master/API_docs.md">API</a>
                    </li>
                    <li>
                        <a href="https://github.com/Allenfp/DataFinal">Source Code</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>


    <!-- Header -->
    <a name="home"></a>
    <div class="intro-header">
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <div class="intro-message">
                        <h1>Social Media Emotion Analysis <br>Machine Learning</h1>
                        <h3>Team FrontRowRiders</h3>
                        <hr class="intro-divider">
                        
                        <form  action="" method="post" role="form">
                                {{ form.csrf }}
                            <div class="form-row">
                                <div class="col-12">
                                  <!-- <label for="name"></label> -->
                                  <input type="text" class="form-control form-control-lg" id="name" name="name" placeholder="Enter comment here...">
                                </div>
                                <div class="col-12">
                                <button type="submit" class="btn btn-block btn-lg btn-primary">Submit</button>
                                </div>
                                </div>
                            </form>
                            
                            <!-- Code to display information from the endpoint     -->
                            {% with messages = get_flashed_messages(with_categories=true) %}
                                {% if messages %}
                    
                            {% for message in messages %}
                                {% if "Error" not in message[1]: %}
                                    <div class="intro-message2">
                                    <h3>Result: {{ message[1] }} </h3>
                                    </div>
                                {% endif %}
                    
                                {% if "Error" in message[1]: %}
                                    <div class="intro-message2">
                                    {{ message[1] }}
                                    </div>
                                {% endif %}
                            {% endfor %}
                                {% endif %}
                            {% endwith %}

                    </div>
                </div>
            </div>

        </div>
        <!-- /.container -->
        <!-- <div>
            <div class="col-12 col-md-9 mb-2 mb-md-0">
            <h3></h1><p id="outputText">Result: </p></h3>
            </div>
        </div> -->


    </div>
    <!-- /.intro-header -->

    


    <!-- Page Content -->

	<a  name="about"></a>
    <div class="content-section-a">

        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-sm-6">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2 class="section-heading">About this Project</h2>
                    <p class="lead">Given the prevalence of depression, <a href="https://www.mailman.columbia.edu/public-health-now/news/depression-rise-us-especially-among-young-teens">especially with younger Americans</a>, it is surprising that there are not more tools in place to identify and assist those who need help. This is particularly true online, where there is evidence that indicates <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4183915/">social media may actually contribute</a> to mental health deterioration for it's users.</p>
                    <p class="lead">Due to this unfortunate set of circumstances, our team set out to use machine learning and natural language processing in an attempt to identify depression and suicidal ideation. Our tool aims to assist and identify such tendencies and help prevent potential tragedies.</p>
                    <p class="lead"><strong>Team members: Allen Partlow, Jenny Chin, Mehreen Seher Hai, and Rommel Angeles.</strong></p>
                </div>
                <div class="col-lg-5 col-lg-offset-2 col-sm-6">
                    <img class="img-responsive" src="{{ url_for('static', filename='img/hope2.jpg') }}" alt="">
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>

    <!-- /.content-section-b -->

    <a name="dataset"></a>
    <div class="content-section-b">

        <div class="container">

            <div class="row"></div>

                <div class="col-lg-5 col-lg-offset-1 col-sm-push-6  col-sm-6">

                        <div class="clearfix"></div>
                        <h2 class="section-heading">Dataset</h2>
                        <p class="lead">The dataset used in this project was constructed by extracting user submitted posts from the <a href="https://www.reddit.com/r/SuicideWatch/">r/SuicideWatch</a> and <a href="https://www.reddit.com/r/CasualConversation/">r/CasualConversation</a> subreddits found on <a href="https://www.reddit.com">Reddit.com</a>.<br>
                        </p>
                        <p class="lead">Data was extracted from Reddit using the <a href="https://www.reddit.com/dev/api/">Reddit API</a>, and <a href="https://praw.readthedocs.io/en/latest/">PRAW: The Python Reddit API Wrapper</a>. The Reddit API limits calls to only the 1000 most recent posts on any subreddit. To work around this limitation, we performed api calls periodically over a 10 day period for both subreddits. Posts were aggregated and checked for duplicates. 
                        </p>
                        <p class="lead">In the end our dataset was comprised of 3412 Reddit submissions. These submissions came out to 549,008 words, 32,288 lines, 2,873,664 characters, or about 705 pages of single spaced 12 point Times New Roman text. 
                        </p>
                    </div>
                <div class="col-lg-5 col-sm-pull-6  col-sm-6">
                    <p> Word cloud for r/CasualConversations </p>
                    <img class="img-responsive" src="{{ url_for('static', filename='img/Happy2.png') }}" alt="">
                    <br><p> Word cloud for r/SuicideWatch</p>
                    <img  class="img-responsive" src="{{ url_for('static', filename='img/Sad2.png') }}" alt="">
                </div>
            </div>
            </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-a -->

    <a name="methodology"></a>
    <div class="content-section-a">

        <div class="container">

            <div class="row">
                <div class="col-lg-5 col-sm-6">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2 class="section-heading">Methodology</a><br></h2>
                    <p class="lead">The data taken from Reddit was classified according to which subreddit and had VADER Sentiment analysis performed on each submission. A training set of data was created separately from the test set. The training set of data was selectively pruned to eliminate exceedingly positive r/SuicideWatch submissions, and exceedingly negative r/CasualConveration submissions. This was done to create higher divergence in the training data. After the pruning process was completed, the data was fitted and transformed using a Spark Machine Learning Pipeline that created features based on TF-IDF analysis and the negative sentiment VADER Sentiment analysis and was vectorized.<br>
                    Using the newly transformed data, a Naive Bayes multinomial classifier model is trained. This model was used to predict whether a given submission from the test set was posted in r/SuicideWatch or r/CasualConversation.  Accuracy was determined to be ~90% +/- ~2%.


                    
                    </p>
                    <p><h2 class="section-heading">Tools used</h2></p>
                        <p><h3>Data Collection:</h3> Python, Praw, Requests, and Pandas.
                        <p><h3>Analysis:</h3> Python, PySpark, VADER Sentiment Analysis, and Pandas.
                        <p><h3>Visualization:</h3> Flask, Wordcloud, WTForms, Bootstrap, HTML, CSS</p>
                </div>
                <div class="col-lg-5 col-lg-offset-2 col-sm-6">
                    <img id="myImg" style="width:500px;height:900px;" class="img-responsive" src="{{ url_for('static', filename='img/DD_NLP_Model.png') }}" alt="">
                </div>
            </div>
            <!-- The Modal -->
            <div id="myModal" class="modal">
                <span class="close">&times;</span>
                <img class="modal-content" id="img01">
                <div id="caption"></div>
              </div>
            <!-- End of the Modal -->
        </div>
        <!-- /.container -->

    </div>

      <!-- /.content-section-a -->

    <a name="limitations"></a>
    <div class="content-section-b">

        <div class="container">

            <div class="row">
                <div class="col-lg-5 col-lg-offset-1 col-sm-push-6  col-sm-6">

                    <div class="clearfix"></div>
                    <h2 class="section-heading">Limitations<br></h2>
                    <p class="lead">Below are some of the challenges and limitations we came across in our project.</p>
                    <ul>
                        <li>
                            Prediction accuracy is ~90%.
                        </li>
                        <li>
                            The model is ignorant of temporal conditions (E.g. Stories about the past).
                        </li>
                        <li>
                            Text shorter that two sentences or longer than three paragraphs tends to be less accurate.
                        </li>
                        <li>
                            The model often gives false positives when the context is not personal. (Depression Self-Help, Suicide Prevention Discussion, Fiction about Depression, etc.)
                        </li>
                    </ul>
                </div>
                <div class="col-lg-5 col-sm-pull-6  col-sm-6">
                    <img class="img-responsive" src="{{ url_for('static', filename='img/limitation.jpg') }}" alt="">
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-b -->

    <a name="nextsteps"></a>
    <div class="content-section-a">

        <div class="container">

            <div class="row">
                <div class="col-lg-5 col-sm-6">

                    <div class="clearfix"></div>
                    <h2 class="section-heading">Next Steps</h2>
                    <p class="lead">Below are some ideas of where this tool can go from here:
                    </p>
                    <ul>
                        <li>Introduce feedback loop for information on incorrect predictions.</li>
                        <li>Seek new datasets for additional classifications (threats of violence, child abuse, other symptomatology, etc).</li>
                        <li>Create an app so this tool can be integrated to social media sites and apps.</li>
                        <li>Help connect users with helplines and additional resources.</li>
                    </ul>
                </div>
                <div class="col-lg-5 col-lg-offset-2 col-sm-6">
                    <img class="img-responsive" src="{{ url_for('static', filename='img/nextsteps.jpg') }}" alt="">
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-a -->

    <a name="resources"></a>
    <div class="content-section-b">

        <div class="container">

            <div class="row">
                <div class="col-lg-5 col-lg-offset-1 col-sm-push-6  col-sm-6">

                    <div class="clearfix"></div>
                    <h2 class="section-heading">Resources<br></h2>
                    <p class="lead">If you yourself are feeling depressed or fear that you may harm yourself, please call 911. If you would just like to talk to someone call the <a href="https://suicidepreventionlifeline.org/media-resources/">Suicide Prevention Lifeline</a> at 1-800-273-TALK (8255) </p>
                    <p class="lead">Many thanks to <a href="https://www.reddit.com">Reddit</a> and it's users for being the source of our training data.</p>
                </div>
                <div class="col-lg-5 col-sm-pull-6  col-sm-6">
                    <img class="img-responsive" style="width:500px;height:400px;"src="{{ url_for('static', filename='img/NSPL_Logo.jpg') }}" alt="">
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>

    
    <!-- /.content-section-b -->    

	<a  name="contact"></a>
    <div class="banner">

        <div class="container">

            <div class="row">
                <div class="col-lg-6">
                    <h2></h2>
                </div>
                <div class="col-lg-6">
                    <ul class="list-inline banner-social-buttons">
                        <!-- <li>
                            <a href="https://twitter.com/SBootstrap" class="btn btn-default btn-lg"><i class="fa fa-twitter fa-fw"></i> <span class="network-name">Twitter</span></a>
                        </li>
                        <li>
                            <a href="https://github.com/IronSummitMedia/startbootstrap" class="btn btn-default btn-lg"><i class="fa fa-github fa-fw"></i> <span class="network-name">Github</span></a>
                        </li>
                        <li>
                            <a href="#" class="btn btn-default btn-lg"><i class="fa fa-linkedin fa-fw"></i> <span class="network-name">Linkedin</span></a>
                        </li> -->
                    </ul>
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.banner -->

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <ul class="list-inline">
                        <li>
                            <a href="#">Home</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#about">About</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#dataset">Dataset</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#methodology">Methodology</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#limitations">Limitations</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#nextsteps">Next Steps</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#resources">Resources</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="https://github.com/Allenfp/DataFinal/blob/master/API_docs.md">API</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="https://github.com/Allenfp/DataFinal">Source Code</a>
                        </li>


                    </ul>
                    <p class="copyright text-muted small">Disclaimer: This website is a project designed to predict emotional sentiments using machine learning.  This is in no way a clinical tool, nor should it be used as a replacement for professional or clinical advice.  If you are in a state of emergency, please call 911 or/and seek professional support.  Thank you.</p>
                    <p class="copyright text-muted small">Copyright &copy; FrontRowRiders 2018. All Rights Reserved</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="{{ url_for('static', filename='js/jquery.js') }}"></script>
    

    <!-- Bootstrap Core JavaScript -->
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>

    <!-- Modal JavaScript -->
    <script src="{{ url_for('static', filename='js/modal.js') }}"></script>    

</body>

</html>
